<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Blog â€“ Emily Miller</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-4e86b82a2d27dd554f38a18426ec4ca4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Emily Miller</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./cv.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-creative" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Creative</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-creative">    
        <li>
    <a class="dropdown-item" href="./art.html">
 <span class="dropdown-text">Art &amp; Poetry</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./adventures.html">
 <span class="dropdown-text">Adventures</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rellimylime"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Blog</h1>
</div>



<div class="quarto-title-meta column-page">

    
  
    
  </div>
  


</header>


<section id="blog" class="level1">
<h1>âœï¸ Blog</h1>
<p><em>Thoughts on data, environment, creativity, and everything in between</em></p>
<hr>
<section id="what-youll-find-here" class="level2">
<h2 class="anchored" data-anchor-id="what-youll-find-here">ğŸŒŸ What Youâ€™ll Find Here</h2>
<p>Welcome to my corner of the internet where I share thoughts on environmental data science, the intersection of creativity and research, and the weird and wonderful moments that happen when youâ€™re passionate about both pixels and poetry. Expect a mix of technical insights, personal reflections, and the occasional rant about why my dog wonâ€™t stop eating kelp.</p>
<blockquote class="blockquote">
<p><em>â€œThe best ideas come from unexpected connections between seemingly unrelated things â€” like satellite imagery and poetry, or data analysis and beach cleanups.â€</em></p>
</blockquote>
<hr>
</section>
<section id="recent-posts" class="level2">
<h2 class="anchored" data-anchor-id="recent-posts">ğŸ“š Recent Posts</h2>
<section id="teaching-computers-to-see-what-weve-been-ignoring" class="level3">
<h3 class="anchored" data-anchor-id="teaching-computers-to-see-what-weve-been-ignoring">Teaching Computers to See What Weâ€™ve Been Ignoring</h3>
<p><em>December 15, 2024 â€¢ Environmental Data Science</em></p>
<p>Thereâ€™s something magical about watching a computer learn to recognize patterns in satellite imagery that human eyes have been overlooking for decades. In my latest research on irrigation patterns in Sub-Saharan Africa, Iâ€™ve been training machine learning models to identify small-scale farming practices that traditional remote sensing has missedâ€¦</p>
<p>The challenge isnâ€™t just technical â€” itâ€™s about teaching algorithms to see with both precision and compassion. How do we ensure that our models donâ€™t just identify patterns, but understand the human stories behind them?</p>
<p><strong>Key takeaway:</strong> The most powerful data science happens when we combine technical rigor with human empathy. Every pixel represents a real farmer, a real family, a real story of resilience and adaptation.</p>
<ul>
<li>ğŸ’¡ <em>Technical note:</em> Using a combination of Sentinel-2 imagery and custom CNN architectures, weâ€™re achieving 94% accuracy in identifying small-scale irrigation systems. The key was training on hand-labeled data from local farmers who know their land better than any algorithm ever could.</li>
</ul>
<hr>
</section>
<section id="why-my-dogs-kelp-obsession-taught-me-about-data-visualization" class="level3">
<h3 class="anchored" data-anchor-id="why-my-dogs-kelp-obsession-taught-me-about-data-visualization">Why My Dogâ€™s Kelp Obsession Taught Me About Data Visualization</h3>
<p><em>December 8, 2024 â€¢ Creative Data Science</em></p>
<p>My dog has an unhealthy obsession with kelp. Sheâ€™ll eat it fresh from the ocean, dried from the beach, or even (much to my embarrassment) straight from other peopleâ€™s seaweed snacks. At first, I thought this was just another quirky dog behavior. Then I realized it was teaching me something profound about data storytellingâ€¦</p>
<p>Like my dog with kelp, people are drawn to data that feels natural and authentic. The best visualizations arenâ€™t just accurate â€” theyâ€™re compelling. They tell a story that makes people want to dig deeper, to understand more, to care about the implications.</p>
<p><strong>The kelp lesson:</strong> Sometimes the most effective way to communicate complex data is to find the human (or canine) connection that makes it relatable and memorable.</p>
<hr>
</section>
<section id="from-beach-cleanup-to-policy-change-how-data-becomes-action" class="level3">
<h3 class="anchored" data-anchor-id="from-beach-cleanup-to-policy-change-how-data-becomes-action">From Beach Cleanup to Policy Change: How Data Becomes Action</h3>
<p><em>November 30, 2024 â€¢ Environmental Activism</em></p>
<p>Last month, I organized a beach cleanup in Isla Vista that brought together 50+ volunteers. We collected over 200 pounds of trash and microplastics. But the real impact wasnâ€™t just in the numbers â€” it was in the conversations, the community connections, and the way data became a catalyst for changeâ€¦</p>
<p>By documenting the types and sources of pollution we found, we created a dataset that local environmental groups are now using to advocate for policy changes. Our â€œrandomâ€ beach cleanup became part of a larger movement toward ocean conservation.</p>
<p><strong>The bigger picture:</strong> Every piece of data we collect, every pattern we identify, every story we tell has the potential to create real-world impact. The question isnâ€™t whether data can change the world â€” itâ€™s whether weâ€™re brave enough to use it that way.</p>
<hr>
</section>
<section id="the-art-of-scientific-communication-why-pretty-pictures-matter" class="level3">
<h3 class="anchored" data-anchor-id="the-art-of-scientific-communication-why-pretty-pictures-matter">The Art of Scientific Communication: Why Pretty Pictures Matter</h3>
<p><em>November 22, 2024 â€¢ Science Communication</em></p>
<p>I spent three hours yesterday making a single data visualization. Three hours for one chart. My advisor would probably say Iâ€™m being inefficient, but I think those three hours were the most important part of my research processâ€¦</p>
<p>Beautiful, clear visualizations donâ€™t just make data more accessible â€” they make it more credible. When people can see and understand your findings at a glance, theyâ€™re more likely to trust your conclusions and act on your recommendations.</p>
<p><strong>The visualization principle:</strong> If you canâ€™t explain your research in a single, compelling image, you probably donâ€™t understand it well enough yet. The process of creating that perfect visualization forces you to clarify your thinking and identify the most important insights.</p>
<hr>
</section>
<section id="confessions-of-a-math-major-turned-environmental-scientist" class="level3">
<h3 class="anchored" data-anchor-id="confessions-of-a-math-major-turned-environmental-scientist">Confessions of a Math Major Turned Environmental Scientist</h3>
<p><em>November 15, 2024 â€¢ Personal Journey</em></p>
<p>I started college as a pure math major, convinced that numbers and equations were the only things that made sense in an otherwise chaotic world. Then I discovered that math could be applied to real problems â€” like tracking deforestation, predicting climate patterns, and understanding how humans interact with the environmentâ€¦</p>
<p>The transition wasnâ€™t always smooth. There were moments when I missed the clean elegance of pure mathematics, when real-world data felt messy and imperfect. But I learned that the messiness is where the magic happens â€” where mathematical rigor meets human complexity.</p>
<p><strong>My advice to fellow math majors:</strong> Donâ€™t be afraid to apply your skills to problems that matter. The world needs more mathematicians who are willing to get their hands dirty with real data and real-world challenges.</p>
<hr>
</section>
</section>
<section id="categories" class="level2">
<h2 class="anchored" data-anchor-id="categories">ğŸ·ï¸ Categories</h2>
<section id="environmental-data-science" class="level3">
<h3 class="anchored" data-anchor-id="environmental-data-science">ğŸ”¬ Environmental Data Science</h3>
<p>Technical insights from my research on satellite imagery, machine learning, and environmental monitoring</p>
</section>
<section id="creative-data-science" class="level3">
<h3 class="anchored" data-anchor-id="creative-data-science">ğŸ¨ Creative Data Science</h3>
<p>Where art meets algorithms, and data visualization becomes storytelling</p>
</section>
<section id="environmental-activism" class="level3">
<h3 class="anchored" data-anchor-id="environmental-activism">ğŸŒ Environmental Activism</h3>
<p>Thoughts on using data and technology for environmental justice and conservation</p>
</section>
<section id="science-communication" class="level3">
<h3 class="anchored" data-anchor-id="science-communication">ğŸ“Š Science Communication</h3>
<p>How to make complex research accessible, engaging, and actionable</p>
</section>
<section id="personal-journey" class="level3">
<h3 class="anchored" data-anchor-id="personal-journey">ğŸš€ Personal Journey</h3>
<p>Reflections on being a math major, environmental scientist, and creative human</p>
</section>
<section id="life-lessons" class="level3">
<h3 class="anchored" data-anchor-id="life-lessons">ğŸ• Life Lessons</h3>
<p>The wisdom that comes from dogs, beach cleanups, and unexpected adventures</p>
<hr>
</section>
</section>
<section id="writing-process" class="level2">
<h2 class="anchored" data-anchor-id="writing-process">ğŸ“ Writing Process</h2>
<p>I write about the intersection of data science and creativity, environmental research, and the human side of technology. My goal is to make complex topics accessible while maintaining scientific rigor and personal authenticity.</p>
<section id="my-writing-philosophy" class="level3">
<h3 class="anchored" data-anchor-id="my-writing-philosophy">My Writing Philosophy</h3>
<ul>
<li><strong>Authenticity over perfection</strong>: Iâ€™d rather share imperfect thoughts that spark conversation than polished pieces that say nothing new.</li>
<li><strong>Technical rigor with human warmth</strong>: Complex topics deserve clear explanations, but they also deserve to feel human and relatable.</li>
<li><strong>Data-driven storytelling</strong>: Every post is grounded in real research, real experiences, or real insights from the field.</li>
<li><strong>Creative connections</strong>: The best insights come from unexpected connections between seemingly unrelated ideas.</li>
</ul>
<hr>
</section>
</section>
<section id="stay-updated" class="level2">
<h2 class="anchored" data-anchor-id="stay-updated">ğŸ’Œ Stay Updated</h2>
<p>Want to be notified when I publish new posts? Iâ€™m working on setting up a newsletter, but for now, the best way to stay updated is to follow me on social media or just check back here periodically.</p>
<p><em>Coming soon: A monthly newsletter with research updates, creative insights, and the occasional poem about data visualization.</em></p>
<hr>
</section>
<section id="guest-posts-collaborations" class="level2">
<h2 class="anchored" data-anchor-id="guest-posts-collaborations">ğŸ¤ Guest Posts &amp; Collaborations</h2>
<p>Iâ€™m always interested in collaborating with other researchers, artists, and thinkers who are exploring the intersection of data science, environmental research, and creative expression. If you have an idea for a guest post, collaborative piece, or just want to chat about the possibilities, letâ€™s connect!</p>
<p><a href="mailto:ermiller@ucsb.edu?subject=Blog%20Collaboration%20Inquiry">Letâ€™s Collaborate</a></p>
<hr>
</section>
</section>
<section id="join-the-conversation" class="level1">
<h1>Join the Conversation! ğŸ’¬</h1>
<p>I love hearing from readers! Whether you have questions about my research, want to discuss a blog post, or just want to share your own thoughts on data science and creativity, Iâ€™d love to connect.</p>
<p><a href="mailto:ermiller@ucsb.edu">Start a Discussion</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>