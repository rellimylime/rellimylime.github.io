<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Blog – Emily Miller</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Emily Miller</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">🏠 Home</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">👋 About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./art.html"> 
<span class="menu-text">🎨 Art &amp; Poetry</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./adventures.html"> 
<span class="menu-text">📸 Adventures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./blog.html" aria-current="page"> 
<span class="menu-text">✍️ Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./research.html"> 
<span class="menu-text">🔬 Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./services.html"> 
<span class="menu-text">💼 Hire Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./cv.html"> 
<span class="menu-text">📄 Resume</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Blog</h1>
</div>



<div class="quarto-title-meta column-page">

    
  
    
  </div>
  


</header>


<div class="hero-section">
<h1 class="hero-title">
✍️ Blog
</h1>
<p class="hero-subtitle">
Thoughts on data, environment, creativity, and everything in between
</p>
</div>
<div class="section-card">
<h2 class="anchored">
🌟 What You’ll Find Here
</h2>
<p>
Welcome to my corner of the internet where I share thoughts on environmental data science, the intersection of creativity and research, and the weird and wonderful moments that happen when you’re passionate about both pixels and poetry. Expect a mix of technical insights, personal reflections, and the occasional rant about why my dog won’t stop eating kelp.
</p>
<p>
<em>“The best ideas come from unexpected connections between seemingly unrelated things — like satellite imagery and poetry, or data analysis and beach cleanups.”</em>
</p>
</div>
<div class="section-card">
<h2 class="anchored">
📚 Recent Posts
</h2>
<div class="blog-post">
<pre><code>&lt;h3&gt;Teaching Computers to See What We've Been Ignoring&lt;/h3&gt;
&lt;div class="blog-meta"&gt;December 15, 2024 • Environmental Data Science&lt;/div&gt;
&lt;p&gt;There's something magical about watching a computer learn to recognize patterns in satellite imagery that human eyes have been overlooking for decades. In my latest research on irrigation patterns in Sub-Saharan Africa, I've been training machine learning models to identify small-scale farming practices that traditional remote sensing has missed...&lt;/p&gt;

&lt;p&gt;The challenge isn't just technical — it's about teaching algorithms to see with both precision and compassion. How do we ensure that our models don't just identify patterns, but understand the human stories behind them?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Key takeaway:&lt;/strong&gt; The most powerful data science happens when we combine technical rigor with human empathy. Every pixel represents a real farmer, a real family, a real story of resilience and adaptation.&lt;/p&gt;

&lt;div style="background: var(--bg-light); padding: 1rem; border-radius: 8px; margin: 1rem 0;"&gt;
  &lt;strong&gt;💡 Technical note:&lt;/strong&gt; Using a combination of Sentinel-2 imagery and custom CNN architectures, we're achieving 94% accuracy in identifying small-scale irrigation systems. The key was training on hand-labeled data from local farmers who know their land better than any algorithm ever could.
&lt;/div&gt;</code></pre>
</div>
<div class="blog-post">
<pre><code>&lt;h3&gt;Why My Dog's Kelp Obsession Taught Me About Data Visualization&lt;/h3&gt;
&lt;div class="blog-meta"&gt;December 8, 2024 • Creative Data Science&lt;/div&gt;
&lt;p&gt;My dog has an unhealthy obsession with kelp. She'll eat it fresh from the ocean, dried from the beach, or even (much to my embarrassment) straight from other people's seaweed snacks. At first, I thought this was just another quirky dog behavior. Then I realized it was teaching me something profound about data storytelling...&lt;/p&gt;

&lt;p&gt;Like my dog with kelp, people are drawn to data that feels natural and authentic. The best visualizations aren't just accurate — they're compelling. They tell a story that makes people want to dig deeper, to understand more, to care about the implications.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The kelp lesson:&lt;/strong&gt; Sometimes the most effective way to communicate complex data is to find the human (or canine) connection that makes it relatable and memorable.&lt;/p&gt;</code></pre>
</div>
<div class="blog-post">
<pre><code>&lt;h3&gt;From Beach Cleanup to Policy Change: How Data Becomes Action&lt;/h3&gt;
&lt;div class="blog-meta"&gt;November 30, 2024 • Environmental Activism&lt;/div&gt;
&lt;p&gt;Last month, I organized a beach cleanup in Isla Vista that brought together 50+ volunteers. We collected over 200 pounds of trash and microplastics. But the real impact wasn't just in the numbers — it was in the conversations, the community connections, and the way data became a catalyst for change...&lt;/p&gt;

&lt;p&gt;By documenting the types and sources of pollution we found, we created a dataset that local environmental groups are now using to advocate for policy changes. Our "random" beach cleanup became part of a larger movement toward ocean conservation.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The bigger picture:&lt;/strong&gt; Every piece of data we collect, every pattern we identify, every story we tell has the potential to create real-world impact. The question isn't whether data can change the world — it's whether we're brave enough to use it that way.&lt;/p&gt;</code></pre>
</div>
<div class="blog-post">
<pre><code>&lt;h3&gt;The Art of Scientific Communication: Why Pretty Pictures Matter&lt;/h3&gt;
&lt;div class="blog-meta"&gt;November 22, 2024 • Science Communication&lt;/div&gt;
&lt;p&gt;I spent three hours yesterday making a single data visualization. Three hours for one chart. My advisor would probably say I'm being inefficient, but I think those three hours were the most important part of my research process...&lt;/p&gt;

&lt;p&gt;Beautiful, clear visualizations don't just make data more accessible — they make it more credible. When people can see and understand your findings at a glance, they're more likely to trust your conclusions and act on your recommendations.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The visualization principle:&lt;/strong&gt; If you can't explain your research in a single, compelling image, you probably don't understand it well enough yet. The process of creating that perfect visualization forces you to clarify your thinking and identify the most important insights.&lt;/p&gt;</code></pre>
</div>
<div class="blog-post">
<pre><code>&lt;h3&gt;Confessions of a Math Major Turned Environmental Scientist&lt;/h3&gt;
&lt;div class="blog-meta"&gt;November 15, 2024 • Personal Journey&lt;/div&gt;
&lt;p&gt;I started college as a pure math major, convinced that numbers and equations were the only things that made sense in an otherwise chaotic world. Then I discovered that math could be applied to real problems — like tracking deforestation, predicting climate patterns, and understanding how humans interact with the environment...&lt;/p&gt;

&lt;p&gt;The transition wasn't always smooth. There were moments when I missed the clean elegance of pure mathematics, when real-world data felt messy and imperfect. But I learned that the messiness is where the magic happens — where mathematical rigor meets human complexity.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;My advice to fellow math majors:&lt;/strong&gt; Don't be afraid to apply your skills to problems that matter. The world needs more mathematicians who are willing to get their hands dirty with real data and real-world challenges.&lt;/p&gt;</code></pre>
</div>
</div>
<div class="section-card">
<h2 class="anchored">
🏷️ Categories
</h2>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
<pre><code>&lt;div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 10px; border-left: 4px solid var(--primary-color);"&gt;
  &lt;h4 style="color: var(--primary-color); margin-bottom: 0.5rem;"&gt;🔬 Environmental Data Science&lt;/h4&gt;
  &lt;p&gt;Technical insights from my research on satellite imagery, machine learning, and environmental monitoring&lt;/p&gt;
&lt;/div&gt;

&lt;div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 10px; border-left: 4px solid var(--secondary-color);"&gt;
  &lt;h4 style="color: var(--secondary-color); margin-bottom: 0.5rem;"&gt;🎨 Creative Data Science&lt;/h4&gt;
  &lt;p&gt;Where art meets algorithms, and data visualization becomes storytelling&lt;/p&gt;
&lt;/div&gt;

&lt;div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 10px; border-left: 4px solid var(--accent-color);"&gt;
  &lt;h4 style="color: var(--accent-color); margin-bottom: 0.5rem;"&gt;🌍 Environmental Activism&lt;/h4&gt;
  &lt;p&gt;Thoughts on using data and technology for environmental justice and conservation&lt;/p&gt;
&lt;/div&gt;

&lt;div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 10px; border-left: 4px solid var(--creative-color);"&gt;
  &lt;h4 style="color: var(--creative-color); margin-bottom: 0.5rem;"&gt;📊 Science Communication&lt;/h4&gt;
  &lt;p&gt;How to make complex research accessible, engaging, and actionable&lt;/p&gt;
&lt;/div&gt;

&lt;div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 10px; border-left: 4px solid var(--warm-color);"&gt;
  &lt;h4 style="color: var(--warm-color); margin-bottom: 0.5rem;"&gt;🚀 Personal Journey&lt;/h4&gt;
  &lt;p&gt;Reflections on being a math major, environmental scientist, and creative human&lt;/p&gt;
&lt;/div&gt;

&lt;div style="text-align: center; padding: 1.5rem; background: var(--bg-light); border-radius: 10px; border-left: 4px solid var(--earth-color);"&gt;
  &lt;h4 style="color: var(--earth-color); margin-bottom: 0.5rem;"&gt;🐕 Life Lessons&lt;/h4&gt;
  &lt;p&gt;The wisdom that comes from dogs, beach cleanups, and unexpected adventures&lt;/p&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="section-card">
<h2 class="anchored">
📝 Writing Process
</h2>
<p>
I write about the intersection of data science and creativity, environmental research, and the human side of technology. My goal is to make complex topics accessible while maintaining scientific rigor and personal authenticity.
</p>
<div style="background: var(--bg-light); padding: 2rem; border-radius: 10px; margin: 2rem 0;">
<pre><code>&lt;h4&gt;My Writing Philosophy&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Authenticity over perfection:&lt;/strong&gt; I'd rather share imperfect thoughts that spark conversation than polished pieces that say nothing new.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Technical rigor with human warmth:&lt;/strong&gt; Complex topics deserve clear explanations, but they also deserve to feel human and relatable.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Data-driven storytelling:&lt;/strong&gt; Every post is grounded in real research, real experiences, or real insights from the field.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Creative connections:&lt;/strong&gt; The best insights come from unexpected connections between seemingly unrelated ideas.&lt;/li&gt;
&lt;/ul&gt;</code></pre>
</div>
</div>
<div class="section-card">
<h2 class="anchored">
💌 Stay Updated
</h2>
<p>
Want to be notified when I publish new posts? I’m working on setting up a newsletter, but for now, the best way to stay updated is to follow me on social media or just check back here periodically.
</p>
<div style="text-align: center; margin: 2rem 0;">
<pre><code>&lt;p&gt;&lt;em&gt;Coming soon: A monthly newsletter with research updates, creative insights, and the occasional poem about data visualization.&lt;/em&gt;&lt;/p&gt;</code></pre>
</div>
</div>
<div class="section-card">
<h2 class="anchored">
🤝 Guest Posts &amp; Collaborations
</h2>
<p>
I’m always interested in collaborating with other researchers, artists, and thinkers who are exploring the intersection of data science, environmental research, and creative expression. If you have an idea for a guest post, collaborative piece, or just want to chat about the possibilities, let’s connect!
</p>
<div style="text-align: center; margin: 2rem 0;">
<pre><code>&lt;a href="mailto:ermiller@ucsb.edu?subject=Blog Collaboration Inquiry" class="btn-custom"&gt;Let's Collaborate&lt;/a&gt;</code></pre>
</div>
</div>
<div class="fun-divider">

</div>
<div class="section-card" style="text-align: center; background: linear-gradient(135deg, var(--secondary-color), var(--accent-color)); color: white;">
<h2 style="color: white;" class="anchored">
Join the Conversation! 💬
</h2>
<p>
I love hearing from readers! Whether you have questions about my research, want to discuss a blog post, or just want to share your own thoughts on data science and creativity, I’d love to connect.
</p>
<p><a href="mailto:ermiller@ucsb.edu" class="btn-custom" style="background: white; color: var(--secondary-color);">Start a Discussion</a></p>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>