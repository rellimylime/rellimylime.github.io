<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Research – Emily Miller</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-2904dbd21c13de947536d7d3eddd3716.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Emily Miller</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./research.html" aria-current="page"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./cv.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-creative" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Creative</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-creative">    
        <li>
    <a class="dropdown-item" href="./art.html">
 <span class="dropdown-text">Art &amp; Poetry</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./adventures.html">
 <span class="dropdown-text">Adventures</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rellimylime"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Research</h1>
</div>



<div class="quarto-title-meta column-page">

    
  
    
  </div>
  


</header>


<section id="research-philosophy" class="level2">
<h2 class="anchored" data-anchor-id="research-philosophy">Research Philosophy</h2>
<p>My research sits at the intersection of remote sensing, machine learning, and environmental justice. I believe that the most powerful environmental science happens when we combine technical rigor with human empathy, using cutting-edge technology to address real-world challenges faced by communities around the globe.</p>
<blockquote class="blockquote">
<p>“Every pixel in a satellite image tells a story about human interaction with the environment. My job is to teach computers to read those stories with both precision and compassion.”</p>
</blockquote>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Core Research Principles
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Community-Centered:</strong> All research should ultimately benefit the communities whose environments we’re studying</li>
<li><strong>Interdisciplinary:</strong> The best solutions come from combining insights across multiple fields</li>
<li><strong>Reproducible:</strong> Open science and reproducible research practices are essential for building trust</li>
<li><strong>Actionable:</strong> Research should lead to tangible policy recommendations and environmental action</li>
</ul>
</div>
</div>
</section>
<section id="current-research-projects" class="level2">
<h2 class="anchored" data-anchor-id="current-research-projects">Current Research Projects</h2>
<section id="satellite-based-irrigation-mapping-in-sub-saharan-africa" class="level3">
<h3 class="anchored" data-anchor-id="satellite-based-irrigation-mapping-in-sub-saharan-africa">Satellite-Based Irrigation Mapping in Sub-Saharan Africa</h3>
<p><strong>Collaborators:</strong> UCSB Water Vegetation and Society (WaVeS) Lab, Prof.&nbsp;Kelly Caylor<br>
<strong>Timeline:</strong> June 2024 - Present<br>
<strong>Status:</strong> In Progress</p>
<p>This project uses high-resolution satellite imagery and machine learning to identify and map irrigation patterns across Sub-Saharan Africa. Traditional remote sensing methods often miss small-scale agricultural practices, leading to significant underestimates of water use and agricultural productivity.</p>
<p><strong>Key Innovation:</strong> Developing statistical frameworks and Python workflows to process multi-temporal Sentinel-2 imagery and identify center pivot and decentralized irrigation systems. The analysis integrates satellite data with hydrological and agricultural systems modeling.</p>
<p><strong>Impact:</strong> Research findings are informing water resource management decisions and climate adaptation planning for local governments and agricultural extension services.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Technical Details
</div>
</div>
<div class="callout-body-container callout-body">
<p>Processing Sentinel-2 (10m resolution) multi-temporal data to detect irrigation signatures across seasons. Developing Python workflows for large-scale satellite imagery analysis and spatial statistical modeling of agricultural water systems.</p>
</div>
</div>
</section>
</section>
<section id="proposed-in-progress-projects" class="level2">
<h2 class="anchored" data-anchor-id="proposed-in-progress-projects">Proposed &amp; In-Progress Projects</h2>
<section id="scaling-metadata-quality-assessment-for-environmental-data-repositories" class="level3">
<h3 class="anchored" data-anchor-id="scaling-metadata-quality-assessment-for-environmental-data-repositories">Scaling Metadata Quality Assessment for Environmental Data Repositories</h3>
<p><strong>Client:</strong> Arctic Data Center / National Center for Ecological Analysis and Synthesis (NCEAS)<br>
<strong>Timeline:</strong> Fall 2024 - Spring 2025<br>
<strong>Status:</strong> MEDS Capstone Project</p>
<p>This capstone project builds reproducible, scalable workflows to aggregate and visualize FAIR (Findable, Accessible, Interoperable, Reusable) metadata quality assessments across environmental data repositories.</p>
<p><strong>Project Goal:</strong> Currently, the Arctic Data Center runs automated metadata checks generating per-dataset results, but aggregated results are not readily available. With thousands of datasets, it’s difficult to identify systemic curation issues such as missing ORCIDs or inconsistent units. This project transforms individual metadata quality assessments into standardized, scalable, and actionable insights.</p>
<p><strong>Key Deliverables:</strong></p>
<ol type="1">
<li><strong>Repeatable ingest pipeline</strong> - Clean, timestamped snapshots of quality assessment data enriched with dataset metadata, with validation to catch data format changes early</li>
<li><strong>Automated visualizations and analysis</strong> - Generate FAIR pillar summaries, temporal trends, and first vs.&nbsp;latest comparisons that auto-update when new data arrives</li>
<li><strong>Focused deep-dives</strong> - Analyze specific dataset types or disciplines, regroup individual checks into themes, and track percent-pass and patterns across time</li>
<li><strong>Lightweight access interface</strong> - Simple filterable web interface to view and download tables, figures, and summaries by time, metadata standard, pillar, or dataset type</li>
<li><strong>Stretch goal</strong> - Configure one additional repository with the same framework to demonstrate portability</li>
</ol>
<p><strong>Technical Approach:</strong> Building reproducible workflows in Python with open data formats (CSV, Parquet). Using Quarto/Jupyter for reports. Emphasis on lightweight, maintainable design that repository staff can sustain post-project.</p>
<p><strong>Impact:</strong> This project enhances Arctic research data accessibility and usability by turning existing checks into clear, repeatable quality signals. Plain-language, FAIR-aligned metrics reduce barriers for research teams, particularly those with limited institutional data support, promoting equitable participation in environmental science. The scalable framework offers a model for other repositories, improving the connected environmental data ecosystem.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Broader Impacts
</div>
</div>
<div class="callout-body-container callout-body">
<p>Plain-language metrics and transparent interface aids environmental education and literacy. Cross-repository comparisons can identify patterns for new checks or standard improvements. The reproducible design fosters collaboration among repository teams and advances community standards for FAIR data.</p>
</div>
</div>
</section>
</section>
<section id="presentations" class="level2">
<h2 class="anchored" data-anchor-id="presentations">Presentations</h2>
<section id="conference-presentations-talks" class="level3">
<h3 class="anchored" data-anchor-id="conference-presentations-talks">Conference Presentations &amp; Talks</h3>
<ul>
<li><p><strong>American Geophysical Union (AGU) Fall Meeting 2024</strong> - “Analyzing the sustainability and climate resilience of rapidly expanding center pivot Irrigation in Sub-Saharan Africa using remote sensing” with Boser A, Perez J, and Prof.&nbsp;Caylor K (Washington D.C., December 9-13, 2024)</p></li>
<li><p><strong>Mantell Symposium in Environmental Justice and Conservation Innovation 2024</strong> - “Water Source Attribution for Center Pivot Irrigation in Sub-Saharan Africa” (UCSB, October 24, 2024)</p></li>
<li><p><strong>Summer@Bren 2024 Flash Talks</strong> - “Satellite Data Reveal Emerging Decentralized Irrigation Systems in Sub-Saharan Africa” (UCSB, August 29, 2024)</p></li>
</ul>
</section>
</section>
<section id="technical-skills-tools" class="level2">
<h2 class="anchored" data-anchor-id="technical-skills-tools">Technical Skills &amp; Tools</h2>
<section id="remote-sensing" class="level3">
<h3 class="anchored" data-anchor-id="remote-sensing">Remote Sensing</h3>
<ul>
<li>Sentinel-1/2, Landsat, Planet imagery</li>
<li>Google Earth Engine</li>
<li>QGIS, ArcGIS Pro</li>
<li>Rasterio, GDAL</li>
</ul>
</section>
<section id="machine-learning" class="level3">
<h3 class="anchored" data-anchor-id="machine-learning">Machine Learning</h3>
<ul>
<li>PyTorch, TensorFlow</li>
<li>Custom CNN architectures</li>
<li>Time series analysis</li>
<li>Transfer learning</li>
</ul>
</section>
<section id="programming" class="level3">
<h3 class="anchored" data-anchor-id="programming">Programming</h3>
<ul>
<li>Python (pandas, numpy, scikit-learn)</li>
<li>R (tidyverse, spatial packages)</li>
<li>JavaScript (Google Earth Engine)</li>
<li>Git version control</li>
</ul>
</section>
<section id="data-visualization" class="level3">
<h3 class="anchored" data-anchor-id="data-visualization">Data Visualization</h3>
<ul>
<li>Matplotlib, Seaborn</li>
<li>Plotly, D3.js</li>
<li>Tableau, PowerBI</li>
<li>Custom web visualizations</li>
</ul>
</section>
</section>
<section id="academic-background" class="level2">
<h2 class="anchored" data-anchor-id="academic-background">Academic Background</h2>
<section id="master-of-environmental-data-science-meds" class="level3">
<h3 class="anchored" data-anchor-id="master-of-environmental-data-science-meds">Master of Environmental Data Science (MEDS)</h3>
<p><strong>University of California, Santa Barbara – Bren School</strong><br>
<em>Expected June 2026</em> | GPA: 4.0</p>
<p>Focus: Remote sensing, machine learning, and environmental data engineering</p>
</section>
<section id="bachelor-of-science-in-mathematics" class="level3">
<h3 class="anchored" data-anchor-id="bachelor-of-science-in-mathematics">Bachelor of Science in Mathematics</h3>
<p><strong>University of California, Santa Barbara</strong><br>
<em>June 2025</em> | GPA: 3.67</p>
<p>Focus: Applied mathematics and environmental science</p>
</section>
<section id="associate-of-science-in-mathematics" class="level3">
<h3 class="anchored" data-anchor-id="associate-of-science-in-mathematics">Associate of Science in Mathematics</h3>
<p><strong>Sacramento City College</strong><br>
<em>June 2022</em> | GPA: 4.0</p>
</section>
</section>
<section id="recognition" class="level2">
<h2 class="anchored" data-anchor-id="recognition">Recognition</h2>
<ul>
<li><strong>MEDS Student Faculty Representative</strong> - Selected by MEDS cohort to represent student voice in faculty meetings and curriculum development</li>
<li><strong>Bren Environmental Leadership Fellow</strong> - Competitive fellowship supporting research on irrigation systems and water resource sustainability in Sub-Saharan Africa (June-December 2024)</li>
</ul>
</section>
<section id="research-collaborations" class="level2">
<h2 class="anchored" data-anchor-id="research-collaborations">Research Collaborations</h2>
<p>I believe that the best research happens through collaboration. I work with researchers across multiple disciplines, academic institutions, and community partners.</p>
<section id="academic-partners" class="level3">
<h3 class="anchored" data-anchor-id="academic-partners">Academic Partners</h3>
<ul>
<li>UCSB Water Vegetation and Society (WaVeS) Lab</li>
<li>UCSB Bren School of Environmental Science &amp; Management</li>
<li>Arctic Data Center / National Center for Ecological Analysis and Synthesis (NCEAS)</li>
</ul>
</section>
<section id="community-professional-partners" class="level3">
<h3 class="anchored" data-anchor-id="community-professional-partners">Community &amp; Professional Partners</h3>
<ul>
<li>IV Recovery Community Initiative (Founder)</li>
<li>Women in Science and Engineering (WiSE) Mentorship Program</li>
</ul>
</section>
</section>
<section id="research-impact" class="level2">
<h2 class="anchored" data-anchor-id="research-impact">Research Impact</h2>
<p>My work focuses on generating actionable insights from environmental data that can inform policy and conservation decisions.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Current Focus
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong>Water Resource Sustainability</strong> - Analyzing irrigation systems in Sub-Saharan Africa to inform climate adaptation and water management strategies</li>
<li><strong>Environmental Data Infrastructure</strong> - Building tools to improve metadata quality and accessibility across environmental research repositories</li>
<li><strong>Community Engagement</strong> - Organizing local environmental stewardship through the IV Recovery Community Initiative</li>
</ul>
</div>
</div>
</section>
<section id="lets-collaborate" class="level2">
<h2 class="anchored" data-anchor-id="lets-collaborate">Let’s Collaborate!</h2>
<p>I’m always excited to collaborate with researchers, practitioners, and communities who share my passion for using technology to address environmental challenges. Whether you’re interested in remote sensing, machine learning, environmental justice, or the intersection of all three, let’s connect!</p>
<p><a href="mailto:ermiller@ucsb.edu" class="btn-custom">Start a Collaboration</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>