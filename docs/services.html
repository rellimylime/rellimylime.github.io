<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Hire Me â€“ Emily Miller</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-9d083d7e0cd169f11641d5107be0a344.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Emily Miller</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./cv.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-creative" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Creative</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-creative">    
        <li>
    <a class="dropdown-item" href="./art.html">
 <span class="dropdown-text">Art &amp; Poetry</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./adventures.html">
 <span class="dropdown-text">Adventures</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rellimylime"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Hire Me</h1>
</div>



<div class="quarto-title-meta column-page">

    
  
    
  </div>
  


</header>


<section id="hire-me" class="level1">
<h1>ğŸ’¼ Hire Me</h1>
<p><em>Letâ€™s turn your data into insights and your ideas into impact</em></p>
<hr>
<section id="what-i-bring-to-the-table" class="level2">
<h2 class="anchored" data-anchor-id="what-i-bring-to-the-table">ğŸŒŸ What I Bring to the Table</h2>
<p>Iâ€™m not just a data scientist â€” Iâ€™m a creative problem-solver who believes that the best solutions come from combining technical rigor with human empathy. Whether you need help with environmental data analysis, creative data visualization, or just want to learn how to make sense of your data, Iâ€™m here to help.</p>
<blockquote class="blockquote">
<p><em>â€œThe best data science happens when we combine technical excellence with creative storytelling and genuine care for the communities we serve.â€</em></p>
</blockquote>
<p><strong>Why Work With Me?</strong> - <strong>Interdisciplinary Expertise:</strong> I bring together mathematics, environmental science, and creative thinking - <strong>Community-Centered Approach:</strong> All my work prioritizes real-world impact and community benefit - <strong>Clear Communication:</strong> I make complex data accessible and actionable for any audience - <strong>Creative Problem-Solving:</strong> I approach challenges with both analytical rigor and creative innovation</p>
<hr>
</section>
<section id="services-i-offer" class="level2">
<h2 class="anchored" data-anchor-id="services-i-offer">ğŸ› ï¸ Services I Offer</h2>
<section id="data-analysis-visualization" class="level3">
<h3 class="anchored" data-anchor-id="data-analysis-visualization">ğŸ“Š Data Analysis &amp; Visualization</h3>
<p>Transform your raw data into beautiful, actionable insights. I specialize in environmental data, but I love working with any dataset that tells a meaningful story. - Statistical analysis and modeling - Custom data visualizations - Interactive dashboards - Data storytelling and reporting <strong>Starting at:</strong> $150/hour</p>
</section>
<section id="environmental-data-science" class="level3">
<h3 class="anchored" data-anchor-id="environmental-data-science">ğŸŒ Environmental Data Science</h3>
<p>Specialized expertise in remote sensing, satellite imagery analysis, and environmental monitoring. Perfect for conservation organizations, research institutions, and environmental consultants. - Satellite imagery analysis - Machine learning for environmental monitoring - GIS and spatial analysis - Environmental impact assessments <strong>Starting at:</strong> $200/hour</p>
</section>
<section id="data-science-tutoring" class="level3">
<h3 class="anchored" data-anchor-id="data-science-tutoring">ğŸ“ Data Science Tutoring</h3>
<p>One-on-one tutoring for students, professionals, or anyone who wants to learn data science. I adapt my teaching style to your learning preferences and goals. - Python and R programming - Machine learning fundamentals - Statistical analysis - Data visualization best practices <strong>Starting at:</strong> $100/hour</p>
</section>
<section id="creative-data-visualization" class="level3">
<h3 class="anchored" data-anchor-id="creative-data-visualization">ğŸ¨ Creative Data Visualization</h3>
<p>Transform your data into compelling visual stories that engage and inspire. Perfect for presentations, reports, websites, and social media. - Custom infographics - Interactive web visualizations - Data-driven art and illustrations - Presentation design <strong>Starting at:</strong> $125/hour</p>
</section>
<section id="research-consulting" class="level3">
<h3 class="anchored" data-anchor-id="research-consulting">ğŸ“ Research Consulting</h3>
<p>Expert guidance on research design, methodology, and analysis. I help researchers, students, and organizations design robust studies and interpret their results. - Research design and methodology - Statistical analysis planning - Literature review and synthesis - Grant writing and proposal development <strong>Starting at:</strong> $175/hour</p>
</section>
<section id="workshops-training" class="level3">
<h3 class="anchored" data-anchor-id="workshops-training">ğŸ—£ï¸ Workshops &amp; Training</h3>
<p>Custom workshops for teams, organizations, or conferences. I design interactive sessions that combine technical skills with creative thinking and real-world applications. - Data science fundamentals - Environmental data analysis - Data visualization design - Science communication <strong>Starting at:</strong> $500/day</p>
<hr>
</section>
</section>
<section id="specialized-expertise" class="level2">
<h2 class="anchored" data-anchor-id="specialized-expertise">ğŸ¯ Specialized Expertise</h2>
<section id="remote-sensing" class="level3">
<h3 class="anchored" data-anchor-id="remote-sensing">ğŸ›°ï¸ Remote Sensing</h3>
<ul>
<li>Sentinel-1/2, Landsat, Planet imagery</li>
<li>Google Earth Engine</li>
<li>Machine learning for image classification</li>
<li>Time series analysis</li>
</ul>
</section>
<section id="machine-learning" class="level3">
<h3 class="anchored" data-anchor-id="machine-learning">ğŸ¤– Machine Learning</h3>
<ul>
<li>Deep learning (PyTorch, TensorFlow)</li>
<li>Computer vision applications</li>
<li>Time series forecasting</li>
<li>Model deployment and optimization</li>
</ul>
</section>
<section id="programming" class="level3">
<h3 class="anchored" data-anchor-id="programming">ğŸ’» Programming</h3>
<ul>
<li>Python (pandas, numpy, scikit-learn)</li>
<li>R (tidyverse, spatial packages)</li>
<li>JavaScript (D3.js, web development)</li>
<li>SQL and database management</li>
</ul>
</section>
<section id="visualization" class="level3">
<h3 class="anchored" data-anchor-id="visualization">ğŸ“Š Visualization</h3>
<ul>
<li>Matplotlib, Seaborn, Plotly</li>
<li>Tableau, PowerBI</li>
<li>Custom web visualizations</li>
<li>Infographic design</li>
</ul>
<hr>
</section>
</section>
<section id="project-examples" class="level2">
<h2 class="anchored" data-anchor-id="project-examples">ğŸ’¼ Project Examples</h2>
<section id="conservation-organization-data-dashboard" class="level3">
<h3 class="anchored" data-anchor-id="conservation-organization-data-dashboard">Conservation Organization Data Dashboard</h3>
<p><strong>Client:</strong> Local Environmental NGO<br>
<strong>Duration:</strong> 3 months</p>
<p><strong>Challenge:</strong> A conservation organization had years of wildlife monitoring data but no way to visualize or analyze it effectively.</p>
<p><strong>Solution:</strong> I created a custom web dashboard that combines their field data with satellite imagery to track habitat changes over time. The dashboard includes interactive maps, trend analysis, and automated reporting features.</p>
<p><strong>Impact:</strong> The organization used the dashboard to secure $50,000 in additional funding and identify three new priority conservation areas.</p>
<hr>
</section>
<section id="graduate-student-research-support" class="level3">
<h3 class="anchored" data-anchor-id="graduate-student-research-support">Graduate Student Research Support</h3>
<p><strong>Client:</strong> PhD Student in Environmental Science<br>
<strong>Duration:</strong> 6 months</p>
<p><strong>Challenge:</strong> A PhD student needed help with statistical analysis and data visualization for their dissertation on climate change impacts.</p>
<p><strong>Solution:</strong> I provided tutoring in R programming, helped design robust statistical models, and created publication-quality visualizations. I also helped with literature review and methodology development.</p>
<p><strong>Impact:</strong> The student successfully defended their dissertation and published two peer-reviewed papers based on our collaborative work.</p>
<hr>
</section>
<section id="corporate-sustainability-reporting" class="level3">
<h3 class="anchored" data-anchor-id="corporate-sustainability-reporting">Corporate Sustainability Reporting</h3>
<p><strong>Client:</strong> Tech Company<br>
<strong>Duration:</strong> 2 months</p>
<p><strong>Challenge:</strong> A tech company needed to create compelling visualizations for their annual sustainability report.</p>
<p><strong>Solution:</strong> I analyzed their environmental data, created custom infographics, and designed an interactive web visualization that made their sustainability efforts engaging and accessible to stakeholders.</p>
<p><strong>Impact:</strong> The report received positive feedback from investors and helped the company improve their ESG ratings.</p>
<hr>
</section>
</section>
<section id="availability-process" class="level2">
<h2 class="anchored" data-anchor-id="availability-process">ğŸ“… Availability &amp; Process</h2>
<section id="current-availability" class="level3">
<h3 class="anchored" data-anchor-id="current-availability">â° Current Availability</h3>
<ul>
<li><strong>Hours per week:</strong> 10-15 hours available</li>
<li><strong>Project timeline:</strong> 2-6 months typical</li>
<li><strong>Response time:</strong> Within 24 hours</li>
</ul>
</section>
<section id="my-process" class="level3">
<h3 class="anchored" data-anchor-id="my-process">ğŸ”„ My Process</h3>
<ol type="1">
<li><strong>Discovery Call:</strong> Understand your needs and goals</li>
<li><strong>Proposal:</strong> Detailed project plan and timeline</li>
<li><strong>Collaboration:</strong> Regular check-ins and feedback</li>
<li><strong>Delivery:</strong> Final deliverables and documentation</li>
</ol>
<hr>
</section>
</section>
<section id="pricing-packages" class="level2">
<h2 class="anchored" data-anchor-id="pricing-packages">ğŸ’° Pricing &amp; Packages</h2>
<p>I believe in transparent, fair pricing that reflects the value of the work and the impact it creates. Hereâ€™s how I structure my pricing:</p>
<p><strong>Hourly Rate:</strong> $100-200/hour<br>
Depending on project complexity and expertise required</p>
<p><strong>Project-Based:</strong> $1,000-10,000<br>
Fixed price for complete projects with defined scope</p>
<p><strong>Retainer:</strong> $2,000/month<br>
Ongoing support and consultation for regular clients</p>
<section id="pricing-factors" class="level4">
<h4 class="anchored" data-anchor-id="pricing-factors">ğŸ’¡ Pricing Factors</h4>
<ul>
<li><strong>Project Complexity:</strong> More complex analyses and custom solutions cost more</li>
<li><strong>Timeline:</strong> Rush projects may incur additional fees</li>
<li><strong>Data Requirements:</strong> Projects requiring data collection or cleaning cost more</li>
<li><strong>Deliverables:</strong> Custom visualizations and reports are priced accordingly</li>
</ul>
<hr>
</section>
</section>
<section id="ideal-clients" class="level2">
<h2 class="anchored" data-anchor-id="ideal-clients">ğŸ¯ Ideal Clients</h2>
<p>I work best with clients who share my values and are committed to creating positive impact. Hereâ€™s who I love working with:</p>
<ul>
<li>ğŸŒ <strong>Environmental Organizations:</strong> NGOs, conservation groups, and environmental consultants working on meaningful projects</li>
<li>ğŸ“ <strong>Students &amp; Researchers:</strong> Graduate students, postdocs, and researchers who need expert guidance on data analysis</li>
<li>ğŸ¢ <strong>Mission-Driven Companies:</strong> Companies committed to sustainability and social impact who want to measure and communicate their progress</li>
<li>ğŸ¨ <strong>Creative Professionals:</strong> Artists, designers, and communicators who want to incorporate data into their creative work</li>
</ul>
<hr>
</section>
<section id="lets-get-started" class="level2">
<h2 class="anchored" data-anchor-id="lets-get-started">ğŸ“ Letâ€™s Get Started</h2>
<p>Ready to turn your data into insights? Hereâ€™s how to get started:</p>
<ol type="1">
<li><strong>Send me an email</strong> describing your project, timeline, and budget</li>
<li><strong>Schedule a discovery call</strong> to discuss your needs in detail</li>
<li><strong>Receive a detailed proposal</strong> with timeline, deliverables, and pricing</li>
<li><strong>Sign a simple contract</strong> and get started on your project</li>
</ol>
<p><a href="mailto:ermiller@ucsb.edu?subject=Project%20Inquiry">Start Your Project</a></p>
</section>
</section>
<section id="lets-create-something-amazing-together" class="level1">
<h1>Letâ€™s Create Something Amazing Together! âœ¨</h1>
<p>Whether you need help with data analysis, want to learn new skills, or have a creative project in mind, Iâ€™d love to hear from you. Letâ€™s turn your data into insights and your ideas into impact!</p>
<p><a href="mailto:ermiller@ucsb.edu">Get In Touch</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>